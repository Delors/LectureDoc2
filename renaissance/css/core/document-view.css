/* LAYER: behavior */

@media print {
    /* !ATTENTION! Using CSS nesting doesn't work with Safari (June 2025). */
    #ld-document-view {
        margin: 0;
    }

    #ld-document-view input[type="password"] {
        display: none;
    }
}

#ld-document-view {
    /* The "display" value is controlled by JavaScript! */
    display: none;

    min-width: calc(var(--ld-slide-width) / 3);
    margin: 0 calc(var(--d-font-size) * 0.5);

    overflow: hidden;

    > ld-section {
        --ld-rendering-mode: section;

        contain: layout paint;

        overflow: hidden;
    }

    ld-card {
        display: block;
        /* width and height must not be set! */

        &:not(.d-no-clear) {
            clear: both;
        }
    }

    ld-deck {
        display: block;
        /* width and height must not be set! */

        > ld-card-group {
            /*  We simulate a stack by creating a CSS Grid with a single cell 
                and assigning all cards which overlay a specific card the same 
                cell. 
                To ensure that the cards are shown in the correct order, we also 
                associate each card with its corresponding z-index.
            */
            position: relative;
            z-index: 0;

            display: grid;
            grid-template-columns: 1fr;
            grid-template-rows: auto;
            grid-template-areas: "stack";

            width: 100%;

            /* Initialize counter for deck cards */
            counter-reset: deck-card-index;
            
            > ld-card {
                /* Use CSS counter to get the actual index */
                counter-increment: deck-card-index;
                --ld-card-index: counter(deck-card-index);

                /* Card index is now set using CSS counter */

                width: 100%;
                height: 100%;

                grid-area: stack;
                z-index: var(--ld-card-index);

                &:not(.overlay, .s-overlay) {
                    background-color: var(--current-background-color);
                }
            }
        }
    }

    ld-presenter-note {
        display: none;
    }
}
